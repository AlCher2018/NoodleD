История изменений NoodleD_Client.exe
======================================

Версия 1.1.5.0
--------------
2018-06-11 Добавлено несколько настроек форматирования строк позиций заказа в config-файле:
 - BillLineFontSize - размер шрифта позиций заказа. Пропорционально этому размеру изменяются и все остальные шрифты чека, кроме заголовка и "подвала", которые определяются в соотв. xml-файлах. По умолчанию - 12.
 - BillLineLeftMargin - отступ строк заказа слева, в пикселях (1px=0.26mm). По умолчанию - 0.
 - BillLineTopMargin - отступ сверху строки блюда, в пикселях (1px=0.26mm). По умолчанию - 0.
 - BillLineIngrTopMargin - отступ сверху строки ингредиента, в пикселях (1px=0.26mm). По умолчанию - 0.
 - BillLinePriceTopMargin - отступ сверху строки цены, в пикселях (1px=0.26mm). По умолчанию - 0.
Исправлена ошибка аварийного завершения приложения, когда в системе не найден ни один принтер для печати чека. Расширен алгоритм поиска принтера для печати чека: имя принтера из config-файла (элемент PrinterName) -- принтер по умолчанию в ОС -- первый принтер из имеющихся в ОС.


Версия 1.1.4.8
--------------
2018-02-28 Изменено место и способ установки языка надписей на кнопках окна выбора режима подачи заказа: С собой или В ресторане. Это должно повысить надежность отображения надписей этого окна при изменении языка интерфейса приложения.


Версия 1.1.4.7
--------------
2017-09-11 При неуспешной проверке доступа к БД теперь будет запускаться цикл проверки: 20 раз с ожиданием между проверками в 2 секунды. Это необходимо в случае, когда приложение запускается через Автозагрузку и MS SQL Server не успевает развернуть свою службу.

Версия 1.1.4.6
--------------
2017-05-03 Отключена запись в журнал бизнес-логики буфера по 200 записей, будет писаться каждое событие. Изменены сообщения в основном журнале (NoodleD.log).


Версия 1.1.4.5
--------------
2017-04-11 Изменен дизайн окна бездейстивия: увеличены кнопки и текст на них, текст сообщения расположен посередине, отсутствует заголовок окна, закруглены углы окна.


Версия 1.1.4.4
--------------
2017-03-24 Изменена логика отображения окна бездействия: это окно появляется только тогда, когда открыто окно ввода промокода, окно выбора ингредиентов для блюд с гарнирами или в Корзине есть блюда.
2017-03-24 Номер заказа теперь формируется из номера устройства и текущего суточного номера, чтобы не было дублированных номеров заказов на КДСах.


Версия 1.1.4.3
--------------
2017-03-22 Добавлена возможность вести журнал действий в бизнес-терминах для дальнейшего бизнес-анализа. Для включения/выключения этого журнала в конфиге есть элемент IsLogUserAction (находится в конце файла под заголовком "сбор информации"), тип значения элемента - логический (да/yes/true/истина/числоНеРавное0 или нет/no/false/ложь/0). Файлы создаются на каждый день в папке Logs с именем actionLog[yyyymmdd]-[n].txt. 
2017-03-22 Добавлен таймер бездействия, т.е. когда пользователь не совершает никаких действий в указанный период времени (время бездействия), то на экране появляется окно с вопросом: "Вы еще здесь?" (окно бездействия). Для настроек таймера бездействия в config-файле имеется раздел "таймер бездействия". 
Время бездействия задается в элементе UserIdleTime, значение - в секундах. Если задать 0, то таймер бездействия задействован НЕ будет.
В окне бездействия имеется две кнопки: Да и Нет. На кнопке Нет тикает таймер, указывающий время в секундах, которое остается для ответа на заданный вопрос. Если кто-то нажал кнопку Нет или истекло время ожидания ответа, то заказ очищается, все вспомогательные окна закрываются и приложение возвращается в исходное состояние. Время ожидания до автоматического закрытия окна бездействия задается в элементе autoUIReset, значение - в секундах.
2017-03-22 Путь к изображениям теперь задается в config-файле, элемент ImagesPath. В файлах настройки чека (папка PrinterBill) в элементах ImageModel, атрибут Source необходимо задавать только ИМЯ файла с расширением, путь задавать нельзя, т.к. путь теперь берется из config-файла.
2017-03-23 Добавлена возможность задавать в config-файле промежуток между пунктами категорий блюд в Главном окне (элемент categoriesPanelMargin) и размер шрифта текста категории (элемент categoriesPanelFontSize).
2017-03-23 Устранен баг, при котором таймер бездейсвия включался сразу же после старта приложения.


Версия 1.1.4.2
2017-03-17 Немного изменена процедура формирования изображений в чеке. К номеру заказа добавлен идентификатор устройства (строка номера описывается в файле \PrinterBill\Header-xx.xml).
2017-03-20 Изменено основное событие сенсорного экрана (MouseUp), на которое реагируют элементы UI.
2017-03-21 Увеличена высота кнопки Оформить для верт.разметки.
В файлах заголовка чека (\PrinterBill\Header-xx.xml) закомментировано подчеркивание заголовка, а в "подвале" (\PrinterBill\Footer-xx.xml) - изображение.

Версия 1.1.4.1
2017-03-15 Добавлена возможность изменять количество столбцов в главном окне - элемент dishesColumnsCount в config-файле (строка <add key="dishesColumnsCount" value="3"/>). По умолчанию, кол-во столбцов = 3.
Если в конфиг-файле не указан принтер пречека, или указано неверное имя, или принтер не готов для печати, то печать пречека производится на первый принтер в системе, если есть.
В Корзине добавлены полукруглые кнопки прокрутки.
Исправлен баг при прокрутке списка блюд в главном меню и Корзине, при котором кнопки нажимались после окончания прокрутки списка указателем.
Для Воков исправлен баг *быстрого* выбора гарниров в разных блюдах, при котором можно было активировать кнопку Добавить в нескольких блюдах и выбрать блюдо 
без гарнира.

Версия 1.1.4.0
--------------
2017-03-10 Добавлена поддержка вертикальной разметки.

Версия 1.1.3.7
2017-03-07 При выборе гарнира для кнопки добавления блюда оставлена только одна анимация: пульсирующий текст. 
2017-03-01 Клик по изображению блюда открывает описание блюда. 
Фон гарнира можено делать ярче или бледнее элементом "dishPanelGarnishBrightness" в config-файле (значения от 0 до 1).
Цвет наименования гарнира можно менять в config-файле элементами "dishPanelGarnishTextColor" (цвет текста НЕвыбранного гарнира) и "dishPanelGarnishSelectTextColor" (цвет текста выбранного гарнира). Значения - текстовое название цвета в терминах OS Windows. Цвета и соответствующие названия можно посмотреть в утилите ColorsViewers.exe, которая находится на FTP-сервере в папке /NoodleD/utils.
При выборе гарнира кнопка добавления анимируется (мигающий фон, пульсирующий текст).
С цены (стоимость заказа в нижнем правом углу главного окна) убрана тень.

Версия 1.1.3.6
--------------
2017-02-21 Исправлена особенность двойного нажатия на кнопки в диалоговом окне "С собой/В ресторане". 

Версия 1.1.3.5
--------------
2017-02-17 Фоновый рисунок можно делать более светлым или более темным в config-файле, элемент "MenuBackgroundBrightness". Значения элемента от 0 (полностью светлый, невидимый) до 1 (полностью яркий). Для фона используется файл AppImages/bg 3hor 1920x1080 background.png, который тоже можно в любом редакторе делать более темным или светлым.
2017-02-17 Удалено окно после печати чека: "Теперь можете подходить к кассе для оплаты".

Версия 1.1.3.4
--------------
2017-02-15 Исправлена ошибка записи блюда с гарнирами в БД: записывались все гарниры, которые выбирались, причем дважды. Сейчас записывается в заказ один гарнир, выбранный последним.

Версия 1.1.3.3
--------------
2017-02-14 На "всплывашке" блюда с гарнирами слово "Добавки" теперь изменяется согласно языку приложения.
2017-02-14 Увеличена зона нажатия "Назад в меню" в окне Корзины. Видимость зоны нажатия отображается тонким бордюром сверху и снизу.
2017-02-14 При выборе гарнира к описанию блюда добавляется наименование гарнира на выбранном языке.
2017-02-13 На кнопках гарниров теперь отображаются изображения гарниров. При выборе гарнира изменяется основное изображение блюда на блюда с гарниром. Поэтому для каждого блюда с гарнирами необходимо иметь несколько изображений: блюдо БЕЗ гарнира, изображение ГАРНИРА и изображение БЛЮДА С ГАРНИРОМ. Если изображение не загружено в 1С, то в программе отображается изображение из файла AppImages\no_image.png. Полностью переделана внутренняя объектная модель панели блюд.
2017-02-13 Исправлена сортировка блюд в категории по номеру позиции.
2017-02-13 Анимация отображения/скрытия описания блюда. Экспериментально было установлено, что при длительности > 1сек или около того, анимация показа описания блюда может "сваливаться" с возвратом в исходное состояние. Поэтому программно установлена длительность 0,5 сек и из config-файла удален элемент "ShowDishDescrAnimationSpeed".
2017-02-13 Исправлена ошибка, когда не очищался признак заказа "С собой".


Версия 1.1.3.2
--------------
2017-02-08 В панели блюда можно регулировать размер шрифта каждого элемента по отдельности. Для этого в config-файле имеются следующие элементы:
-	dishPanelHeaderFontSize - шрифт наименования блюда в заголовке панели блюда
-	dishPanelUnitCountFontSize - шрифт количества/ед.изм. порции в заголовке панели блюда
-	dishPanelDescriptionFontSize - шрифт описания блюда
-	dishPanelAddButtoFontSize - шрифт кнопок добавления блюда к заказу
-	dishPanelFontSize - шрифт буковки i на кнопке показа/скрытия описания блюда


Версия 1.1.3.1
--------------
2017-02-05 Разметка пунктов списка категорий блюд сделана динамической, если пунктов меню больше 6. В config-файл добавлен элемент IsAllowScrollingDishCategories (логический) - разрешать ли скроллинг пунктов категорий блюд. Если значение = истина, то появляется вертикальная полоса скроллинга, размер элементов списка не изменяется. Если значение = false, то элементы списка уменьшаются по вертикали, чтобы поместились все элементы.

Версия 1.1.3.0
--------------
2017-02-04 Добавлена простенькая заставка при старте приложения. Exe-файл увеличился с 193536 байт до 347648, т.к. изображение (149073 байта) на заставке вставляется, как ресурс в exe ((
2017-02-04 Проверка доступной памяти при запуске приложения. Если доступной памяти меньше 300 Мб, то приложение не запускается.
2017-02-04 Изменено наименование сборки с WpfClient.exe на NoodleD_Client.exe, которое лучше отображает смысл приложения.
2017-02-04 В информационное окно после печати чека ("Теперь подходите к кассе для оплаты") добавлена функция автоматического закрытия окна по истечении времени, которое указывается в config-файле: элемент AutoCloseMsgBoxAfterPrintOrder, в мсек. Если указан 0, то окно автоматически не закрывается.
2017-02-03 Проверка уже запущенного экземпляра, чтобы нельзя было запустить приложение несколько раз.
2017-02-03 Если количество единиц порции блюда (UnitCount) = 0, то не показывать в заголовке блюда количество и наименование единиц порции (граммы, миллилитры и т.д.)
2017-02-03 Увеличена зона нажатия удаления ингредиента и блюда в окне Заказа в полтора раза, т.е. вокруг "крестика" тоже срабатывает событие удаления.
2017-02-03 В config-файл добавлен элемнт dishPanelFontSize (целое) - размер шрифта элементов панели блюда, кроме наименования в заголовке: количество и наименование единицы измерения блюда в заголовке, описание блюда, тексты на кнопках добавления к заказу.


Версия 1.1.2.13
---------------
2017-02-03 Устранена причина аварийного завершения приложения при анимации добавления блюда из "всплывашки" (блюда с ингредиентами) - процедура закрытия "всплывашки" путем установки поля DialogResult. Чтобы полностью отключить анимацию выбора блюда из "всплывашки" можно в config-файле установить элемент isAnimatedSelectVoki в истину (true или 1).
2017-02-03 Изменен алгоритм формирования ПОЛНОГО наименования блюда (наименование блюда включает и наименование гарнира) для печати чека: 
	1. полное наименование указано в гарнире; 
	2. полное наименование формируется из: наименование блюда + " с гарниром " + наименование гарнира. 
Строки соответствуют выбранному языку в главном окне. Режим формирования полного наименования указывается в config-файле: элемент  DishFullNameInGarnish (логический). Если значение элемента = истина (true или 1), то полное наименование указано в гарнире. Иначе см.п.2


Версия 1.1.2.12
---------------
2017-02-02 В config-файл добавлен элемнт dishPanelHeaderFontSize (целое) - размер шрифта наименования блюда в заголовке панели блюда.
2017-02-02 В config-файл добавлен элемент IsWriteTraceMessages (логический) - записывать ли в лог приложения подробную отладочную информацию при загрузке приложения

